% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calculate_performance.R
\name{calculate_performance}
\alias{calculate_performance}
\title{Calculate Performance Metrics for Trading Strategy}
\usage{
calculate_performance(returns, trades)
}
\arguments{
\item{returns}{Numeric vector of daily returns. The first day is typically removed
as it often represents a baseline with zero return.}

\item{trades}{Data frame of trade records with the following columns:
\describe{
\item{\code{type}}{Trade type ("buy" or "sell").}
\item{\code{date}}{Trade execution date.}
\item{\code{value}}{Trade value (e.g., price * quantity).}
\item{\code{fee}}{Transaction fee.}
\item{\code{holding_days}}{Days held for the position (only for sell trades).}
\item{\code{exit_reason}}{Reason for exiting the position (only for sell trades).}
}}
}
\value{
A list containing the following performance metrics:
\describe{
\item{\code{total_return}}{Cumulative return over the entire period.}
\item{\code{annualized_return}}{Annualized return based on total return.}
\item{\code{mean_daily_return}}{Average daily return.}
\item{\code{volatility}}{Standard deviation of daily returns.}
\item{\code{sharpe_ratio}}{Sharpe ratio assuming risk-free rate of 0.}
\item{\code{max_drawdown}}{Maximum drawdown over the period.}
\item{\code{var_95}}{95\% Value at Risk.}
\item{\code{es_95}}{95\% Expected Shortfall.}
\item{\code{n_trades}}{Number of completed trades (buy-sell pairs).}
\item{\code{win_rate}}{Percentage of profitable trades.}
\item{\code{avg_holding_days}}{Average holding period for trades.}
\item{\code{max_holding_days}}{Maximum holding period for trades.}
\item{\code{exit_reason_counts}}{Table of exit reasons for trades.}
}
}
\description{
Computes various performance metrics for a trading strategy, including return statistics,
risk metrics, and trade analysis. This function fixes previous trade pairing issues.
}
\details{
This function calculates key performance indicators for a trading strategy. It handles
both return-based metrics (e.g., Sharpe ratio, drawdown) and trade-specific metrics
(e.g., win rate, holding periods). The trade pairing logic has been improved to ensure
each buy is matched with the correct subsequent sell.
}
\seealso{
\code{\link[PerformanceAnalytics]{Return.annualized}},
\code{\link[PerformanceAnalytics]{maxDrawdown}}
}
